# ================================================================================
# Secret - Données sensibles de l'application CodeArena
# ================================================================================
# ATTENTION: Ce fichier contient des valeurs d'exemple encodées en base64
# En production, utilisez des solutions comme:
# - Sealed Secrets
# - External Secrets Operator
# - HashiCorp Vault
# - AWS Secrets Manager / GCP Secret Manager
# ================================================================================

apiVersion: v1
kind: Secret
metadata:
  name: codearena-secrets
  namespace: codearena
  labels:
    app: codearena
    component: config
type: Opaque
data:
  # ============================================================
  # SUPABASE Configuration
  # ============================================================
  # Ces valeurs DOIVENT être remplacées par vos vraies clés Supabase
  # Encodez vos clés avec: echo -n "votre-clé" | base64

  # URL Supabase (exemple: https://xxxx.supabase.co)
  SUPABASE_URL: aHR0cHM6Ly95b3VyLXByb2plY3Quc3VwYWJhc2UuY28=

  # Clé anonyme Supabase (anon/public key)
  SUPABASE_ANON_KEY: ZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SnBjM01pT2lKemRYQmhZbUZ6WlNJc0luSmxaaUk2SW5sdmRYSXRjSEp2YW1WamRDSXNJbkp2YkdVaU9pSmhibTl1SWl3aWFXRjBJam94TmpVeE1EQXdNREF3ZlEuWW91ci1BUEktS2V5LUhlcmU=

  # Clé service Supabase (service_role key - TRÈS SENSIBLE)
  SUPABASE_SERVICE_KEY: ZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SnBjM01pT2lKemRYQmhZbUZ6WlNJc0luSmxaaUk2SW5sdmRYSXRjSEp2YW1WamRDSXNJbkp2YkdVaU9pSnpaWEoyYVdObFgzSnZiR1VpTENKcFlYUWlPakUyTlRFd01EQXdNREI5LllvdXItU2VydmljZS1Sb2xlLUtleS1IZXJl

  # ============================================================
  # Redis Password (optionnel si Redis est sécurisé)
  # ============================================================
  REDIS_PASSWORD: Y29kZWFyZW5hLXJlZGlzLXBhc3M=

  # ============================================================
  # JWT Secret pour l'authentification (si utilisé)
  # ============================================================
  JWT_SECRET: c3VwZXItc2VjcmV0LWp3dC1rZXktY2hhbmdlLW1lLWluLXByb2R1Y3Rpb24=

  # ============================================================
  # Database Connection (si base locale au lieu de Supabase)
  # ============================================================
  # DATABASE_URL: cG9zdGdyZXNxbDovL3VzZXI6cGFzc0BkYi1zZXJ2aWNlOjU0MzIvY29kZWFyZW5h

---
# ================================================================================
# NOTES IMPORTANTES:
# ================================================================================
#
# 1. GÉNÉRATION DES SECRETS:
#    Pour encoder une valeur en base64:
#    echo -n "ma-valeur-secrete" | base64
#
#    Pour décoder (vérification):
#    echo "dmFsZXVyLWVuY29kZWU=" | base64 -d
#
# 2. MEILLEURES PRATIQUES:
#    - Ne JAMAIS commiter ce fichier avec de vraies clés dans Git
#    - Utiliser .gitignore pour exclure les secrets
#    - Rotation régulière des secrets (tous les 90 jours min)
#    - Droits d'accès RBAC stricts sur les secrets Kubernetes
#
# 3. SOLUTIONS DE GESTION DES SECRETS EN PRODUCTION:
#    a) Sealed Secrets (Bitnami):
#       - Chiffre les secrets avec une clé publique
#       - Seul le cluster peut les déchiffrer
#
#    b) External Secrets Operator:
#       - Synchronise depuis AWS Secrets Manager, GCP, Vault, etc.
#       - Rotation automatique
#
#    c) HashiCorp Vault:
#       - Solution enterprise de gestion des secrets
#       - Audit trail complet
#
# 4. COMMANDE POUR CRÉER LE SECRET:
#    kubectl create secret generic codearena-secrets \
#      --from-literal=SUPABASE_URL="https://xxx.supabase.co" \
#      --from-literal=SUPABASE_ANON_KEY="eyJ..." \
#      --namespace=codearena
#
# 5. VÉRIFICATION:
#    kubectl get secret codearena-secrets -n codearena -o yaml
#
# ================================================================================
